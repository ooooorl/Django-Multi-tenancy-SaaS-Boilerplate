########################################
# Redis Configuration (for Django/Celery)
########################################

# Default port
port 6379

# Bind to all interfaces (safe when Django/Celery are on same machine)
bind 0.0.0.0

# Require password (uncomment and set strong password in prod)
# requirepass mystrongpassword

########################################
# Persistence
########################################

# RDB snapshots (periodic saves)
# Save every 900 sec (15 min) if at least 1 key changed
save 900 1
# Save every 300 sec (5 min) if at least 10 keys changed
save 300 10
# Save every 60 sec if at least 10k keys changed
save 60 10000

# Append-only file (AOF) for safer durability logs every write
appendonly yes
# fsync every second (good balance between safety and speed)
appendfsync everysec

########################################
# Memory management
########################################

# Max memory usage (adjust depending on your server)
maxmemory 900mb

# Eviction policy when memory is full
# Evict least recently used keys when max memory is reached instead of crashing
maxmemory-policy allkeys-lru

########################################
# Logging
########################################

loglevel notice
# logfile "/var/log/redis/redis.log"   # Uncomment to log to a file

########################################
# Other
########################################

# Enable TCP keepalive
tcp-keepalive 60

# Number of databases (default 16, Django/Celery usually just use 0)
databases 16
